<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;900&display=swap" rel=stylesheet><link rel=stylesheet type=text/css href=https://jancieslak.github.io/notki.github.io/css/bootstrap.min.css><link rel=stylesheet type=text/css href=https://jancieslak.github.io/notki.github.io/css/style.css><title>Cheat sheets | Setup</title></head><body data-bs-theme=dark class="sans-serif roboto"><div id=content><div class="w-100 d-flex flex-row"><aside class="vh-100 od-flex flex-column p-3 verflow-auto custom-scrollbar border-3" style=width:400px><span class=fs-4>Table of contents</span><hr><nav id=TableOfContents><ul><li><a href=#setup>Setup</a><ul><li><a href=#setup-projektu-typescript-owego>Setup projektu Typescript-owego</a></li><li><a href=#setup-przydatnych-narzędzi-developerskich>Setup przydatnych narzędzi developerskich</a></li><li><a href=#jak-dodać-testy-do-projektu>Jak dodać testy do projektu</a></li><li><a href=#projekt-testowy>Projekt testowy</a></li></ul></li></ul></nav></aside><div class="w-100 vh-100 overflow-auto custom-scrollbar test p-5"><div class="w-100 d-flex flex-column align-items-center"><h1 class=display-2>Setup</h1><br><br><div class=post-content><h1 id=setup>Setup</h1><p>Tutaj wypisałem paro etapowy setup projektów typescriptowych</p><h2 id=setup-projektu-typescript-owego>Setup projektu Typescript-owego</h2><p>Na początek musimy stworzyć folder dla naszego projektu. Możemy to zrobić normalnie myszkiem lub w terminalu za pomocą <strong>mkdir</strong>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mkdir moj-super-projekt
</span></span></code></pre></div><p>Od razu inicjalizujemy repozytorium gita</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git init
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Tworzymy plik .gitignore z node_modules, dzięki czemu nie wrzucimy node_modules na GitHuba</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;node_modules&#34;</span> &gt; .gitignore
</span></span></code></pre></div><p>Następnie inicjalizujemy projekt <strong>npm</strong> (za pomocą, którego nasz projekt będzie mógł pobierać i używać bibliotek zewnętrznych. Biblioteka <strong>typescript</strong> będzie jendną z nich). Używanie npm-a ma również taką zaletę że możemy sobie tam zdefiniować skrypty, które upraszczają robotę jak zobaczymy później.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Możemy zrobić to za pomocą npm init jeśli chcemy dostować parę rzeczy przy inicjalizacji</span>
</span></span><span style=display:flex><span>npm init
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Lub możemy pominąć wszystko i ustawić domyślne parametry, </span>
</span></span><span style=display:flex><span><span style=color:#75715e># które możemy potem zmienić jak nam będzie coś przeszkadzało (co polecam)</span>
</span></span><span style=display:flex><span>npm init -y
</span></span></code></pre></div><p>Później musimy zainstalować bibliotekę <strong>typescript</strong> (żeby używać typescripta) i <strong>ts-node</strong> (biblioteka ułatwiająca uruchamianie typescripta)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npm install --save-dev typescript
</span></span><span style=display:flex><span>npm install --save-dev ts-node
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># lub wersja skrócona</span>
</span></span><span style=display:flex><span><span style=color:#75715e># install -&gt; i</span>
</span></span><span style=display:flex><span><span style=color:#75715e># --save-dev -&gt; -D</span>
</span></span><span style=display:flex><span><span style=color:#75715e># i możemy wypisać od razu parę bibliotek (także w wersji dłuższej)</span>
</span></span><span style=display:flex><span>npm i -D typescript ts-node
</span></span></code></pre></div><blockquote><p>Używamy tutaj opcji <strong>save-dev</strong>, ponieważ są to zależności naszego projektu, których nie potrzebujemy do finalnego działania projektu. Ta opcja, mówi tam to że dana zależność będzie używana tylko do developmnetu, czyli rozwijania programu, a nie jej finalnej dystrybucji.</p></blockquote><p>Następnie inicjalizujemy plik zawierający konfigurację Typescript-a. Dzięki temu plikowi możemy manipulować opcjami jakie daje nam Typescript oraz w jaki sposób nasz Typescript będzie przekładany na Javascript. Również polecam się przyjrzeć tym najpopularniejszym ustawieniom.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npx tsc --init
</span></span></code></pre></div><p>Jedyne opcje na razie jakie chcemy dodać to ustawienia dla <strong>ts-node</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;compilerOptions&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>...</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;ts-node&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;esm&#34;</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;experimentalSpecifierResolution&#34;</span>: <span style=color:#e6db74>&#34;node&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Stwórzmy prosty program na którym moglibyśmy przetestować czy działa nam typescript. Zróbmy folder <strong>src</strong>, w którym będzie się znajdował cały nasz kod. Zróbmy w nim dwa pliki.
Jeden <strong>index.ts</strong>, który będzie punktem wejściowym naszego programu i na przykład <strong>hello.ts</strong>, który będzie zawierał funkcję, która wypisuje hello w konsoli.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#75715e>// src/hello.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>hello() {</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;hello&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#75715e>// src/index.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>hello</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./hello&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>hello</span>()
</span></span></code></pre></div><p>Na koniec zmodyfikujmy jeszcze <strong>package.json</strong> żeby łatwiej uruchamiać nasz program.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>...</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;scripts&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;start&#34;</span>: <span style=color:#e6db74>&#34;ts-node src/index.ts&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>...</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Program powinien się uruchomić po wykonaniu komendy</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npm run start
</span></span></code></pre></div><h2 id=setup-przydatnych-narzędzi-developerskich>Setup przydatnych narzędzi developerskich</h2><p>Jest jeszcze parę kroków, które warto wykonać żeby VSCode formatował wszystkie pliki tak jak chcemy i żeby sprawdzał nasz kod pod kontem błędów. Paczki które polecam na razie to:</p><ul><li>prettier - jest to formater dzięki, któremy wszystkie pliki będą jednakowo sformatowane na podstawie pliku konfiguracyjnego. Jest on potrzebny ze względu na naturę Typescripta / Javascripta. Możemy w nich definiować stringi na 2 sposoby &rsquo;tak&rsquo; i &ldquo;tak&rdquo;, możemy wstawiać ; na koniec linii, bądź nie. Ta dowolność sprawia że jeden plik może wyglądać inaczej niż drugi i ten problem prettier rozwiązuje.</li><li>eslint - tak zwany linter, program który analizuje nasz kod pod kątem zasad, które mu definiujemy w pliku konfiguracyjnym (możemy też pobrać gotową paczkę takich zasad żeby się samemu nie męczyć). Eslint analizuje też nasz kod pod kątem błędów i złych praktyk, np. jeśli zdefiniujemy zmienną i jej nie użyjemy VSCode użyje eslinta i podkreśli nam z wiadomością, że mamy nieużytą zmienną w kodzie</li></ul><p>Jeśli chcecie poczytać więcej <a href=https://prettier.io/docs/en/index.html>tu</a> jest strona prettiera, a <a href=https://eslint.org/>tu</a> eslita</p><p>Instalujemy prettier-a i eslinta</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npm i -D prettier
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Flaga -g oznacza, że instalujemy ją globalnie, czyli raz wykonana komenda wystarczy </span>
</span></span><span style=display:flex><span><span style=color:#75715e># i już nigdy jej nie musimy powtarzać, jest to wygodne przy narzędziach jak eslint,</span>
</span></span><span style=display:flex><span><span style=color:#75715e># jednak niektóre lepiej żeby były zainstalowane lokalnie do projektu</span>
</span></span><span style=display:flex><span>npm install eslint -g
</span></span></code></pre></div><p>Teraz inicjalizujemy eslint-a w naszym projekcie</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npm init @eslint/config
</span></span></code></pre></div><p>Strzałkami góra/dół i enterem wybieramy opcje, które nam się przydadzą, polecam wybrać:</p><ul><li>to check syntax and find problems</li><li>Javascript modules</li><li>None of these</li><li>Yes</li><li>Node (Jeśli i tak się zaznaczy browser to usuńcie &ldquo;env&rdquo; z pliku konfiguracyjnego)</li><li>JSON</li><li>Yes</li><li>npm</li></ul><p>Powinien się wygenerować następujący plik</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;extends&#34;</span>: [<span style=color:#e6db74>&#34;eslint:recommended&#34;</span>, <span style=color:#e6db74>&#34;plugin:@typescript-eslint/recommended&#34;</span>],
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;overrides&#34;</span>: [],
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;parser&#34;</span>: <span style=color:#e6db74>&#34;@typescript-eslint/parser&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;parserOptions&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;ecmaVersion&#34;</span>: <span style=color:#e6db74>&#34;latest&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;sourceType&#34;</span>: <span style=color:#e6db74>&#34;module&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;plugins&#34;</span>: [<span style=color:#e6db74>&#34;@typescript-eslint&#34;</span>],
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;rules&#34;</span>: {}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Dla prettiera sami musimy zrobić plik. Robimy go z nazwą <strong>.prettierrc</strong>. Prosty config nam wystarczy, wklejacie to</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;trailingComma&#34;</span>: <span style=color:#e6db74>&#34;es5&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;tabWidth&#34;</span>: <span style=color:#ae81ff>2</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;semi&#34;</span>: <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;singleQuote&#34;</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Żeby VSCode działał z prettier-em i eslint-em musimy zainstalować do nich pluginy Prettier i ESLint.</p><p>Dla testu dodajcie tą linijke do pliku <strong>hello.ts</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>unused</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>123</span>;
</span></span></code></pre></div><p>Po zapisaniu (sformatowaniu, ale obstawiam, że macie format on save w VSCodzie) średnik powinien się usunąć (bo w <strong>.prettierrc</strong> ustawiliśmy <strong>semi</strong> na <strong>false</strong>, semi - semicolon - średnik) i powinien sie podkreślić żółtą linią z tekstem, że nasza wartość &ldquo;is never used&rdquo;. Jak najedziemy na nią kursorem to będzie tam link do strony z naszym błędem i jak go naprawić.</p><h2 id=jak-dodać-testy-do-projektu>Jak dodać testy do projektu</h2><p>Często nasze programy będą wymagać testów, oto jeden ze sposobów
na dodanie testów do naszego projektu. Będziemy używać popularnej
biblioteki do testów <strong>Jest</strong>.</p><p>Instalujemy paczke</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npm i -D jest ts-jest @types/jest
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Potrzebujemy kolejnego pliku konfiguracyjnego, tworzymy go za pomocą</span>
</span></span><span style=display:flex><span>npx ts-jest config:init
</span></span></code></pre></div><p>Dodajemy skrypt do <strong>package.json</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>...</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;scripts&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;test&#34;</span>: <span style=color:#e6db74>&#34;jest&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>...</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Żeby przetestować czy działa możemy stworzyć plik testowy w folderze <strong>src</strong>, pliki nazywamy z końcówką .test.ts, na przykład
<strong>src/hello.test.ts</strong>. Wklejcie najprostrzy test pokazujący działanie if-ów.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#a6e22e>test</span>(<span style=color:#e6db74>&#34;test ifs&#34;</span>, () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>number</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>expect</span>(<span style=color:#66d9ef>number</span>).<span style=color:#a6e22e>toBe</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>Żeby uruchomić testy wpisujemy w terminal</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>npm run test
</span></span></code></pre></div><h2 id=projekt-testowy>Projekt testowy</h2><p>Zrobiłem testowy projekt <a href=https://github.com/JanCieslak/test-ts-project>tutaj</a>, jeśli je pobierzecie, zobaczycie że nie działa na początku (dlatego że nie ma node_modules). Rozwiązujecie to zainstalowaniem paczek zdefiniowanych w <strong>package.json</strong>, w node_modules znajdują się zainstalowane paczki.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># W ten sposób instalujemy to co jest nie zainstalowane z package.json</span>
</span></span><span style=display:flex><span>npm install
</span></span></code></pre></div></div></div></div></div></div><script src=https://jancieslak.github.io/notki.github.io/js/feather.min.js></script>
<script>feather.replace()</script></body></html>